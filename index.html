<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠä¸–è©±è¨€èª ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ (ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç‰ˆ)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel Standalone for JSX transformation in browser (for development/offline demo) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Interãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* å‡ºåŠ›ã‚¨ãƒªã‚¢ã® pre-wrap ã§æ•´å½¢ */
        .output-area {
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Reactã‚³ãƒ¼ãƒ‰ãŒã“ã“ã«å«ã¾ã‚Œã¾ã™
        function App() {
            // useState ã¨ useRef ã‚’ React ã‹ã‚‰æ­£ã—ãå–å¾—
            const { useState, useRef } = React;

            // ãƒ˜ãƒ«ãƒ—ãƒ†ã‚­ã‚¹ãƒˆã®å†…å®¹
            const HELP_TEXT = `
# ã€ŒãŠä¸–è©±ã€è¨€èª ãƒ˜ãƒ«ã‚¿ ğŸµ

ã‚ˆã†ã“ãã€ä¸»æ§˜ã€‚ã€ŒãŠä¸–è©±ã€è¨€èªã‚’ã”åˆ©ç”¨ã„ãŸã ãã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã“ã“ã§ã¯ã€ç¾åœ¨ã®ã€ŒãŠä¸–è©±ã€è¨€èªã§ã”åˆ©ç”¨ã„ãŸã ã‘ã‚‹æ©Ÿèƒ½ã¨ã€ãã®ä½¿ã„æ–¹ã‚’ã”æ¡ˆå†…ç”³ã—ä¸Šã’ã¾ã™ã€‚

---

## 1. å¤‰æ•°ã¨å€¤ã®ç®¡ç†

ã€ŒãŠä¸–è©±ã€è¨€èªã§ã¯ã€å€¤ã‚’ä¿æŒã™ã‚‹ãŸã‚ã«ã€Œã€‡ã€‡ã•ã‚“ã€ã¨ã„ã†ãŠåå‰ã®ç®±ã‚’ã”ç”¨æ„ã„ãŸã ã‘ã¾ã™ã€‚

### å¤‰æ•°ã®å®£è¨€ã¨å€¤ã®ãŠæ¸¡ã—
æ–°ã—ã„å¤‰æ•°ã‚’ä½œæˆã—ã€ãã“ã«æ•°å€¤ã‚’æ ¼ç´ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ãŠåå‰ã¯ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã« [æ•°å€¤] ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œãƒªãƒ³ã‚´ã®æ•°ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œãƒªãƒ³ã‚´ã®æ•°ã•ã‚“ã€ã« 5 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    \`\`\`

---

## 2. æ•°å€¤ã®è¨ˆç®—

ç¾åœ¨ã€ä»¥ä¸‹ã®ç®—è¡“æ¼”ç®—ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚

### æ›ã‘ç®— (å€ã«ã™ã‚‹)
å¤‰æ•°ã®å€¤ã‚’æŒ‡å®šã•ã‚ŒãŸæ•°å€¤ã®å€ã«ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã‚’ [æ•°å€¤] å€ã«ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œåˆè¨ˆé‡‘é¡ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œåˆè¨ˆé‡‘é¡ã•ã‚“ã€ã« 100 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œåˆè¨ˆé‡‘é¡ã•ã‚“ã€ã‚’ 3 å€ã«ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`

### è¶³ã—ç®—
å¤‰æ•°ã®å€¤ã«æŒ‡å®šã•ã‚ŒãŸæ•°å€¤ã‚’è¶³ã—åˆã‚ã›ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã« [æ•°å€¤] ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œåœ¨åº«æ•°ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œåœ¨åº«æ•°ã•ã‚“ã€ã« 20 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œåœ¨åº«æ•°ã•ã‚“ã€ã« 7 ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`

### å¼•ãç®—
å¤‰æ•°ã®å€¤ã‹ã‚‰æŒ‡å®šã•ã‚ŒãŸæ•°å€¤ã‚’å¼•ãã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã‹ã‚‰ [æ•°å€¤] ã‚’å¼•ã„ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œæ®‹ã‚Šæ™‚é–“ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œæ®‹ã‚Šæ™‚é–“ã•ã‚“ã€ã« 60 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œæ®‹ã‚Šæ™‚é–“ã•ã‚“ã€ã‹ã‚‰ 15 ã‚’å¼•ã„ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`

### å‰²ã‚Šç®—
å¤‰æ•°ã®å€¤ã‚’æŒ‡å®šã•ã‚ŒãŸæ•°å€¤ã§å‰²ã‚Šã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã‚’ [æ•°å€¤] ã§å‰²ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œäººæ•°ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œäººæ•°ã•ã‚“ã€ã« 100 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œäººæ•°ã•ã‚“ã€ã‚’ 4 ã§å‰²ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`

### å‰°ä½™
å¤‰æ•°ã®å€¤ã‚’æŒ‡å®šã•ã‚ŒãŸæ•°å€¤ã§å‰²ã‚Šã€ãã®**ã‚ã¾ã‚Š**ã‚’å…ƒã®å¤‰æ•°ã«æ ¼ç´ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã‚’ [æ•°å€¤] ã§å‰²ã£ãŸã‚ã¾ã‚Šã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œã‚¢ãƒ¡ã®æ•°ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œã‚¢ãƒ¡ã®æ•°ã•ã‚“ã€ã« 10 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œã‚¢ãƒ¡ã®æ•°ã•ã‚“ã€ã‚’ 3 ã§å‰²ã£ãŸã‚ã¾ã‚Šã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã€Œã‚¢ãƒ¡ã®æ•°ã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚
    \`\`\`

---

## 3. çµæœã®ã”å ±å‘Šï¼ˆå‡ºåŠ›ï¼‰

è¨ˆç®—çµæœã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸»æ§˜ã«ã”å ±å‘Šã„ãŸã—ã¾ã™ã€‚

### å¤‰æ•°ã®å€¤ã®ã”å ±å‘Š
å¤‰æ•°ã®ç¾åœ¨ã®å€¤ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œç¾åœ¨ã®æ™‚é–“ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œç¾åœ¨ã®æ™‚é–“ã•ã‚“ã€ã« 15 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œç¾åœ¨ã®æ™‚é–“ã•ã‚“ã€ã« 5 ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã€Œç¾åœ¨ã®æ™‚é–“ã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚
    \`\`\`

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã”å ±å‘Š
æŒ‡å®šã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãã®ã¾ã¾å‡ºåŠ›ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ã€Œæœ¬æ—¥ã®æ¥­å‹™ã¯çµ‚äº†ã„ãŸã—ã¾ã—ãŸã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    \`\`\`

---

## 4. æ¡ä»¶ã«ã‚ˆã‚‹å‡¦ç†ã®åˆ‡ã‚Šæ›¿ãˆ

ç‰¹å®šã®æ¡ä»¶ã«å¿œã˜ã¦å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¤šå±¤ï¼ˆãƒã‚¹ãƒˆï¼‰ã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### ã‚‚ã—ã€œãªã‚‰ï¼ˆã‚ˆã‚Šå¤§ãã„å ´åˆï¼‰
æŒ‡å®šã•ã‚ŒãŸå¤‰æ•°ã®å€¤ãŒã€ã‚ã‚‹æ•°å€¤ã‚ˆã‚Šã‚‚å¤§ãã„å ´åˆã«å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚**å¤šå±¤ï¼ˆãƒã‚¹ãƒˆï¼‰ã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚**

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ãŒ [æ¯”è¼ƒæ•°å€¤] ã‚ˆã‚Šã‚‚å¤§ãã„ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰
        ... (æ¡ä»¶ãŒçœŸã®å ´åˆã®å‡¦ç†) ...
    ãã†ã§ãªã‘ã‚Œã°
        ... (æ¡ä»¶ãŒå½ã®å ´åˆã®å‡¦ç†) ...
    ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`
    * \`ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰\` ã¨ \`ãã†ã§ãªã‘ã‚Œã°\` ã®é–“ã«æ›¸ã‹ã‚ŒãŸå‡¦ç†ã¯ã€**ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ**ï¼ˆå­—ä¸‹ã’ï¼‰ã‚’ã™ã‚‹ã¨èª­ã¿ã‚„ã™ããªã‚Šã¾ã™ã€‚
    * \`ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\` ã§ã“ã®æ¡ä»¶åˆ†å²ã®çµ‚ã‚ã‚Šã‚’ç¤ºã—ã¾ã™ã€‚

* **ä¾‹ï¼ˆå˜ä¸€æ¡ä»¶ï¼‰:**
    \`\`\`
    ãŠåå‰ã¯ã€Œæ°—æ¸©ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œæ°—æ¸©ã•ã‚“ã€ã« 28 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚

    ã€Œæ°—æ¸©ã•ã‚“ã€ãŒ 25 ã‚ˆã‚Šã‚‚å¤§ãã„ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰
        ã€Œæœ¬æ—¥ã¯å¤§å¤‰æš‘ãã”ã–ã„ã¾ã™ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãã†ã§ãªã‘ã‚Œã°
        ã€Œå¿«é©ãªæ°—å€™ã§ã”ã–ã„ã¾ã™ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`

### ã‚‚ã—ã€œãªã‚‰ï¼ˆç­‰ã—ã„å ´åˆï¼‰
æŒ‡å®šã•ã‚ŒãŸå¤‰æ•°ã®å€¤ãŒã€ã‚ã‚‹æ•°å€¤ã¨**ç­‰ã—ã„ã‹ã©ã†ã‹**ã§å‡¦ç†ã‚’åˆ†å²ã—ã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    ã€Œ[å¤‰æ•°å]ã•ã‚“ã€ãŒ [æ¯”è¼ƒæ•°å€¤] ã¨åŒã˜ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰
        ã€Œæº€ç‚¹ã§ã”ã–ã„ã¾ã™ï¼ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãã†ã§ãªã‘ã‚Œã°
        ã€Œæº€ç‚¹ã§ã¯ã”ã–ã„ã¾ã›ã‚“ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œç‚¹æ•°ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œç‚¹æ•°ã•ã‚“ã€ã« 100 ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚
    ã€Œç‚¹æ•°ã•ã‚“ã€ãŒ 100 ã¨åŒã˜ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰
        ã€Œæº€ç‚¹ã§ã”ã–ã„ã¾ã™ï¼ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãã†ã§ãªã‘ã‚Œã°
        ã€Œæº€ç‚¹ã§ã¯ã”ã–ã„ã¾ã›ã‚“ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
    ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`

---

## 5. ç¹°ã‚Šè¿”ã—å‡¦ç†

æŒ‡å®šã•ã‚ŒãŸå›æ•°ã ã‘ã€åŒã˜å‡¦ç†ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

* **æ§‹æ–‡:**
    \`\`\`
    [æ•°å€¤] å›ç¹°ã‚Šè¿”ã—ã¦ãã ã•ã„ã€‚
        ... (ç¹°ã‚Šè¿”ã™å‡¦ç†) ...
    ç¹°ã‚Šè¿”ã—ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`
* **ä¾‹:**
    \`\`\`
    ãŠåå‰ã¯ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚
    ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã« 0 ã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚

    3 å›ç¹°ã‚Šè¿”ã—ã¦ãã ã•ã„ã€‚
        ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã« 1 ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
        ã€Œç¾åœ¨ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤ã¯ï¼šã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚
        ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚
    ç¹°ã‚Šè¿”ã—ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚
    \`\`\`

---

## 6. ãƒã‚¤ãƒ³ã‚¿ã¨ãƒ¡ãƒ¢ãƒªæ“ä½œ (ãƒãƒ¥ãƒ¼ãƒªãƒ³ã‚°å®Œå…¨æ€§)

ã€ŒãŠä¸–è©±ã€è¨€èªã®å†…éƒ¨ãƒ¡ãƒ¢ãƒªã¨ãƒã‚¤ãƒ³ã‚¿ã‚’ç›´æ¥æ“ä½œã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### ãƒã‚¤ãƒ³ã‚¿ã®ç§»å‹•
* **å³ã¸**: \`ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`
* **å·¦ã¸**: \`ãƒã‚¤ãƒ³ã‚¿ã‚’å·¦ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`

### ãƒã‚¤ãƒ³ã‚¿ã®æŒ‡ã™ã‚»ãƒ«ã®å€¤æ“ä½œ
* **å€¤ã®å¢—åŠ **: \`ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`
* **å€¤ã®æ¸›å°‘**: \`ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’æ¸›ã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`

### å…¥å‡ºåŠ›
* **ã‚»ãƒ«ã®å€¤ã®æ–‡å­—å‡ºåŠ›**: \`ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\` (ç¾åœ¨ã®ã‚»ãƒ«ã®å€¤ã‚’ASCIIæ–‡å­—ã¨ã—ã¦å‡ºåŠ›)
* **æ–‡å­—å…¥åŠ›ã¨ä»£å…¥**: \`å…¥åŠ›ã‚’ãŠå—ã‘å–ã‚Šã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\` (ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®æœ€åˆã®æ–‡å­—ã®ASCIIå€¤ã‚’ç¾åœ¨ã®ã‚»ãƒ«ã«ä»£å…¥)

### ãƒ«ãƒ¼ãƒ— (æ¡ä»¶ä»˜ãã‚¸ãƒ£ãƒ³ãƒ—)
* **ãƒ«ãƒ¼ãƒ—é–‹å§‹**: \`ã‚‚ã—ãƒã‚¤ãƒ³ã‚¿ã®å€¤ãŒ0ãªã‚‰ã€ã“ã®å…ˆã¸è¡Œã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`
* **ãƒ«ãƒ¼ãƒ—çµ‚äº†**: \`ãƒã‚¤ãƒ³ã‚¿ã®å€¤ãŒ0ã§ãªã‘ã‚Œã°ã€ã“ã“ã¸æˆ»ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\`

* **ä¾‹ï¼ˆã€ŒABCã€ã®å‡ºåŠ›ï¼‰:**
    \`\`\`
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚
    \`\`\`

---

## ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œæ–¹æ³•

ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«ä¸Šè¨˜ã®æ§‹æ–‡ã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã€**ã€Œå®Ÿè¡Œã—ã¦ã„ãŸã ãã¾ã™ã€**ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã€çµæœãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

ä½•ã‹ã”ä¸æ˜ãªç‚¹ã‚„ã€è¿½åŠ ã—ãŸã„æ©Ÿèƒ½ãªã©ã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠç”³ã—ä»˜ã‘ãã ã•ã„ã¾ã›ã€‚
            `;

            const [code, setCode] = useState(''); // åˆæœŸã‚³ãƒ¼ãƒ‰ã‚’ç©ºã«è¨­å®š
            const [output, setOutput] = useState('');
            const [error, setError] = useState('');
            const [isInputModalOpen, setIsInputModalOpen] = useState(false);
            const [inputModalValue, setInputModalValue] = useState('');
            const resolveInputPromise = useRef(null); // Promiseã®resolveé–¢æ•°ã‚’ä¿æŒ

            // å­—å¥è§£æå™¨ (Lexer)
            // å…¥åŠ›ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’æ„å‘³ã®ã‚ã‚‹æœ€å°å˜ä½ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã«åˆ†è§£ã—ã¾ã™ã€‚
            const lex = (input) => {
                const tokens = [];
                let cursor = 0;

                // ãƒˆãƒ¼ã‚¯ãƒ³ã®å®šç¾©ã¨æ­£è¦è¡¨ç¾ï¼ˆæ–°ã—ã„ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ï¼‰
                // ã‚ˆã‚Šå…·ä½“çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å…ˆã«è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ­£ç¢ºã«ãƒãƒƒãƒã•ã›ã¾ã™
                const tokenTypes = [
                    { type: 'DECLARE_VAR', regex: /^ãŠåå‰ã¯ã€Œ(.+?)ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\n?/ },
                    { type: 'ASSIGN_VAR', regex: /^ã€Œ(.+?)ã€ã« (\d+) ã‚’(ãŠæ¸¡ã—ã—ã¾ã™ã€‚|æ¸¡ã—ã¦ãã ã•ã„ã€‚)\n?/ },
                    { type: 'MULTIPLY_VAR', regex: /^ã€Œ(.+?)ã€ã‚’ (\d+) å€ã«ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'ADD_VAR', regex: /^ã€Œ(.+?)ã€ã« (\d+) ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'SUBTRACT_VAR', regex: /^ã€Œ(.+?)ã€ã‹ã‚‰ (\d+) ã‚’å¼•ã„ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'DIVIDE_VAR', regex: /^ã€Œ(.+?)ã€ã‚’ (\d+) ã§å‰²ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'MODULO_VAR', regex: /^ã€Œ(.+?)ã€ã‚’ (\d+) ã§å‰²ã£ãŸã‚ã¾ã‚Šã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ }, 
                    { type: 'PRINT_VAR', regex: /^ã€Œ(.+?)ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚\n?/ },
                    { type: 'REPORT_MSG', regex: /^ã€Œ(.+?)ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\n?/ },
                    { type: 'IF_GREATER_CONDITION', regex: /^ã€Œ(.+?)ã€ãŒ (\d+) ã‚ˆã‚Šã‚‚å¤§ãã„ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ }, 
                    { type: 'IF_EQUAL_CONDITION', regex: /^ã€Œ(.+?)ã€ãŒ (\d+) ã¨åŒã˜ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ }, 
                    { type: 'IF_TRUE_BLOCK', regex: /^ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰\n?/ },
                    { type: 'IF_FALSE_BLOCK', regex: /^ãã†ã§ãªã‘ã‚Œã°\n?/ },
                    { type: 'END_IF', regex: /^ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\n?/ },
                    { type: 'REPEAT_START', regex: /^(\d+) å›ç¹°ã‚Šè¿”ã—ã¦ãã ã•ã„ã€‚\n?/ },
                    { type: 'REPEAT_END', regex: /^ç¹°ã‚Šè¿”ã—ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\n?/ },

                    // Brainfuck-like commands
                    { type: 'PTR_INC', regex: /^ãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'PTR_DEC', regex: /^ãƒã‚¤ãƒ³ã‚¿ã‚’å·¦ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'VAL_INC', regex: /^ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'VAL_DEC', regex: /^ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’æ¸›ã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'OUTPUT_VAL', regex: /^ãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'INPUT_VAL', regex: /^å…¥åŠ›ã‚’ãŠå—ã‘å–ã‚Šã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'LOOP_START', regex: /^ã‚‚ã—ãƒã‚¤ãƒ³ã‚¿ã®å€¤ãŒ0ãªã‚‰ã€ã“ã®å…ˆã¸è¡Œã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },
                    { type: 'LOOP_END', regex: /^ãƒã‚¤ãƒ³ã‚¿ã®å€¤ãŒ0ã§ãªã‘ã‚Œã°ã€ã“ã“ã¸æˆ»ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n?/ },

                    { type: 'LINE_SEPARATOR', regex: /^---\n?/ }, // ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚’åŒºåˆ‡ã‚‹ãŸã‚ã®ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿ï¼ˆãƒ˜ãƒ«ãƒ—ç”¨ï¼‰
                    { type: 'WHITESPACE', regex: /^\s+/ }, // ã‚¹ãƒšãƒ¼ã‚¹ã€æ”¹è¡Œãªã©ã‚’ã‚¹ã‚­ãƒƒãƒ—
                ];

                while (cursor < input.length) {
                    let matched = false;
                    for (const { type, regex } of tokenTypes) {
                        const match = input.substring(cursor).match(regex);
                        if (match) {
                            if (type !== 'WHITESPACE') {
                                // æ”¹è¡Œæ–‡å­—ã‚’è€ƒæ…®ã—ã¦è¡Œç•ªå·ã‚’æ­£ç¢ºã«è¨ˆç®—
                                const line = input.substring(0, cursor).split('\n').length;
                                tokens.push({ type, value: match, line: line });
                            }
                            cursor += match[0].length;
                            matched = true;
                            break;
                        }
                    }
                    if (!matched) {
                        const line = input.substring(0, cursor).split('\n').length;
                        // äºˆæœŸã—ãªã„æ–‡å­—ã¾ãŸã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼
                        const offendingLine = input.substring(cursor).split('\n')[0];
                        throw new Error(`æœªçŸ¥ã®æ§‹æ–‡ã§ã™ï¼ˆ${line}è¡Œç›®ï¼‰: '${offendingLine.substring(0, 20)}...'`);
                    }
                }
                return tokens;
            };

            // æ§‹æ–‡è§£æå™¨ (Parser)
            // ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¸¦ã³ã‹ã‚‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ§‹é€ ï¼ˆæŠ½è±¡æ§‹æ–‡æœ¨ ASTï¼‰ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
            const parse = (tokens) => {
                let tokenIndex = 0;

                const parseBlock = () => {
                    const blockNodes = [];
                    while (tokenIndex < tokens.length) {
                        const token = tokens[tokenIndex];
                        if (!token) break; // End of tokens

                        // ãƒ–ãƒ­ãƒƒã‚¯ã®çµ‚äº†æ¡ä»¶ï¼ˆãƒã‚¹ãƒˆã•ã‚ŒãŸIFæ–‡/ç¹°ã‚Šè¿”ã—æ–‡/ãƒ«ãƒ¼ãƒ—æ–‡ã®çµ‚äº†ã€ã¾ãŸã¯ELSEãƒ–ãƒ­ãƒƒã‚¯ã®é–‹å§‹ï¼‰
                        if (token.type === 'IF_FALSE_BLOCK' || token.type === 'END_IF' || token.type === 'REPEAT_END' || token.type === 'LOOP_END') {
                            return blockNodes;
                        }
                        // LINE_SEPARATORã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ã¿ã§å‡¦ç†ã—ã€ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ç„¡è¦–
                        if (token.type === 'LINE_SEPARATOR') {
                            tokenIndex++; // skip it
                            continue;
                        }

                        switch (token.type) {
                            case 'DECLARE_VAR':
                                blockNodes.push({ type: 'DECLARE_VAR_NODE', name: token.value[1] });
                                break;
                            case 'ASSIGN_VAR':
                                blockNodes.push({ type: 'ASSIGN_VAR_NODE', name: token.value[1], value: parseInt(token.value[2], 10) });
                                break;
                            case 'MULTIPLY_VAR':
                                blockNodes.push({ type: 'MULTIPLY_VAR_NODE', name: token.value[1], factor: parseInt(token.value[2], 10) });
                                break;
                            case 'ADD_VAR':
                                blockNodes.push({ type: 'ADD_VAR_NODE', name: token.value[1], value: parseInt(token.value[2], 10) });
                                break;
                            case 'SUBTRACT_VAR':
                                blockNodes.push({ type: 'SUBTRACT_VAR_NODE', name: token.value[1], value: parseInt(token.value[2], 10) });
                                break;
                            case 'DIVIDE_VAR':
                                blockNodes.push({ type: 'DIVIDE_VAR_NODE', name: token.value[1], divisor: parseInt(token.value[2], 10) });
                                break;
                            case 'MODULO_VAR': 
                                blockNodes.push({ type: 'MODULO_VAR_NODE', name: token.value[1], divisor: parseInt(token.value[2], 10) });
                                break;
                            case 'PRINT_VAR':
                                blockNodes.push({ type: 'PRINT_VAR_NODE', name: token.value[1] });
                                break;
                            case 'REPORT_MSG':
                                blockNodes.push({ type: 'REPORT_MSG_NODE', message: token.value[1] });
                                break;
                            case 'IF_GREATER_CONDITION':
                            case 'IF_EQUAL_CONDITION': 
                                const currentIfLine = token.line; // ã‚¨ãƒ©ãƒ¼å ±å‘Šç”¨ã«è¡Œç•ªå·ã‚’ä¿æŒ
                                const ifNode = {
                                    type: 'IF_NODE',
                                    conditionType: token.type, // æ¡ä»¶ã®ã‚¿ã‚¤ãƒ—ã‚’ä¿æŒ
                                    name: token.value[1],
                                    comparisonValue: parseInt(token.value[2], 10),
                                    trueBlock: [],
                                    falseBlock: [],
                                };

                                tokenIndex++; // Consume IF_CONDITION token

                                // Parse true block
                                if (tokens[tokenIndex] && tokens[tokenIndex].type === 'IF_TRUE_BLOCK') {
                                    tokenIndex++; // Consume IF_TRUE_BLOCK token
                                    ifNode.trueBlock = parseBlock(); // Recursive call for true block
                                } else {
                                    throw new Error(`ã€Œã‚‚ã—ã€ã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ï¼ˆ${currentIfLine}è¡Œç›®ï¼‰`);
                                }

                                // Check for else block
                                if (tokens[tokenIndex] && tokens[tokenIndex].type === 'IF_FALSE_BLOCK') {
                                    tokenIndex++; // Consume IF_FALSE_BLOCK token
                                    ifNode.falseBlock = parseBlock(); // Recursive call for false block
                                }

                                // Ensure IF block is closed properly
                                if (tokens[tokenIndex] && tokens[tokenIndex].type === 'END_IF') {
                                    blockNodes.push(ifNode);
                                    // tokenIndex will be advanced after the switch for END_IF.
                                } else {
                                    throw new Error(`ã€ŒãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ï¼ˆ${currentIfLine}è¡Œç›®ï¼‰`);
                                }
                                break; // Break from switch after handling IF_CONDITION
                            case 'REPEAT_START':
                                const repeatCount = parseInt(token.value[1], 10);
                                const repeatLine = token.line;
                                tokenIndex++; // Consume REPEAT_START

                                const repeatBody = parseBlock(); // Recursively parse the block inside the loop

                                if (tokens[tokenIndex] && tokens[tokenIndex].type === 'REPEAT_END') {
                                    blockNodes.push({
                                        type: 'REPEAT_NODE',
                                        count: repeatCount,
                                        body: repeatBody,
                                    });
                                    // tokenIndex will be advanced after the switch for REPEAT_END.
                                } else {
                                    throw new Error(`ã€Œç¹°ã‚Šè¿”ã—ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ï¼ˆ${repeatLine}è¡Œç›®ï¼‰`);
                                }
                                break; // Break from switch after handling REPEAT_START

                            // Brainfuck-like commands (æ–°ã—ã„æ©Ÿèƒ½ã®ASTãƒãƒ¼ãƒ‰è¿½åŠ )
                            case 'PTR_INC':
                                blockNodes.push({ type: 'PTR_INC_NODE' });
                                break;
                            case 'PTR_DEC':
                                blockNodes.push({ type: 'PTR_DEC_NODE' });
                                break;
                            case 'VAL_INC':
                                blockNodes.push({ type: 'VAL_INC_NODE' });
                                break;
                            case 'VAL_DEC':
                                blockNodes.push({ type: 'VAL_DEC_NODE' });
                                break;
                            case 'OUTPUT_VAL':
                                blockNodes.push({ type: 'OUTPUT_VAL_NODE' });
                                break;
                            case 'INPUT_VAL':
                                blockNodes.push({ type: 'INPUT_VAL_NODE' });
                                break;
                            case 'LOOP_START':
                                const loopStartLine = token.line;
                                tokenIndex++; // Consume LOOP_START

                                const loopBody = parseBlock(); // Recursively parse the block inside the loop

                                if (tokens[tokenIndex] && tokens[tokenIndex].type === 'LOOP_END') {
                                    blockNodes.push({
                                        type: 'LOOP_NODE',
                                        body: loopBody,
                                    });
                                    // tokenIndex will be advanced after the switch for LOOP_END.
                                } else {
                                    throw new Error(`ã€Œãƒã‚¤ãƒ³ã‚¿ã®å€¤ãŒ0ã§ãªã‘ã‚Œã°ã€ã“ã“ã¸æˆ»ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚ã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ï¼ˆ${loopStartLine}è¡Œç›®ï¼‰`);
                                }
                                break; // Break from switch after handling LOOP_START

                            default:
                                throw new Error(`äºˆæœŸã›ã¬ãƒˆãƒ¼ã‚¯ãƒ³ã§ã™: ${token.type} ï¼ˆ${token.line}è¡Œç›®ï¼‰`);
                        }
                        // IF_GREATER_CONDITION, IF_EQUAL_CONDITION, REPEAT_START, LOOP_START ä»¥å¤–ã®å ´åˆã®ã¿ tokenIndex ã‚’é€²ã‚ã‚‹
                        // ã“ã‚Œã‚‰ã¯å†…éƒ¨ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¶ˆè²»ã™ã‚‹ãŸã‚
                        if (token.type !== 'IF_GREATER_CONDITION' && token.type !== 'IF_EQUAL_CONDITION' && token.type !== 'REPEAT_START' && token.type !== 'LOOP_START') {
                               tokenIndex++;
                        }
                    }
                    return blockNodes;
                };

                // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®è§£æã‚’é–‹å§‹
                const globalAst = parseBlock();
                return globalAst;
            };

            // è©•ä¾¡å™¨ (Evaluator)
            // æŠ½è±¡æ§‹æ–‡æœ¨ (AST) ã‚’å®Ÿè¡Œã—ã€çµæœã‚’ç”Ÿæˆã—ã¾ã™ã€‚
            const evaluate = async (ast, variables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise) => {
                let currentOutput = '';
                // å¤‰æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã¯å‚ç…§æ¸¡ã—ã§å…±æœ‰ï¼ˆã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ï¼‰
                // Brainfuckã®ãŸã‚ã®ãƒ¡ãƒ¢ãƒªã¨ãƒã‚¤ãƒ³ã‚¿ã‚‚variablesã«å«ã‚ã‚‹
                // åˆå›å‘¼ã³å‡ºã—æ™‚ã€ã¾ãŸã¯variablesã«memoryãŒãªã„å ´åˆã«åˆæœŸåŒ–
                if (!variables.memory) {
                    variables.memory = new Array(30000).fill(0); // Brainfuckæ¨™æº–ã®30,000ã‚»ãƒ«
                }
                if (typeof variables.dataPointer === 'undefined') {
                    variables.dataPointer = 0;
                }

                for (const node of ast) {
                    switch (node.type) {
                        case 'DECLARE_VAR_NODE':
                            if (Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯æ—¢ã«å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã™ã€‚`);
                            }
                            variables[node.name] = undefined; // å¤‰æ•°ã‚’å®£è¨€ã—ã€undefined ã§åˆæœŸåŒ–
                            break;
                        case 'ASSIGN_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] = node.value;
                            break;
                        case 'MULTIPLY_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] *= node.factor;
                            break;
                        case 'ADD_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] += node.value;
                            break;
                        case 'SUBTRACT_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] -= node.value;
                            break;
                        case 'DIVIDE_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            if (node.divisor === 0) {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã‚¼ãƒ­ã§å‰²ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] /= node.divisor;
                            break;
                        case 'MODULO_VAR_NODE': 
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            if (node.divisor === 0) {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã‚¼ãƒ­ã§å‰²ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            variables[node.name] %= node.divisor;
                            break;
                        case 'PRINT_VAR_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            currentOutput += `ã€Œ${node.name}ã€ã®å€¤ã¯ ${variables[node.name]} ã§ã”ã–ã„ã¾ã™ã€‚\n`;
                            break;
                        case 'REPORT_MSG_NODE':
                            currentOutput += `${node.message}\n`;
                            break;
                        case 'IF_NODE':
                            if (!Object.prototype.hasOwnProperty.call(variables, node.name)) {
                                throw new Error(`ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€ã€Œ${node.name}ã€ã¨ã„ã†å¤‰æ•°ã¯ã¾ã å®£è¨€ã•ã‚Œã¦ãŠã‚Šã¾ã›ã‚“ã€‚`);
                            }
                            if (typeof variables[node.name] !== 'number') {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ã€Œ${node.name}ã€ã¯æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§æ¯”è¼ƒã§ãã¾ã›ã‚“ã€‚`);
                            }
                            let conditionResult = false;
                            if (node.conditionType === 'IF_GREATER_CONDITION') {
                                conditionResult = variables[node.name] > node.comparisonValue;
                            } else if (node.conditionType === 'IF_EQUAL_CONDITION') { 
                                conditionResult = variables[node.name] === node.comparisonValue;
                            }

                            if (conditionResult) {
                                currentOutput += await evaluate(node.trueBlock, variables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise); // trueBlockã‚’è©•ä¾¡
                            } else {
                                currentOutput += await evaluate(node.falseBlock, variables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise); // falseBlockã‚’è©•ä¾¡
                            }
                            break;
                        case 'REPEAT_NODE':
                            if (node.count < 0) {
                                throw new Error(`æã‚Œå…¥ã‚Šã¾ã™ã€ç¹°ã‚Šè¿”ã—å›æ•°ã¯è² ã®å€¤ã«ã§ãã¾ã›ã‚“ã€‚`);
                            }
                            for (let i = 0; i < node.count; i++) {
                                currentOutput += await evaluate(node.body, variables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise); // ãƒ«ãƒ¼ãƒ—æœ¬ä½“ã‚’è©•ä¾¡
                            }
                            break;

                        // Brainfuck-like commandsã®è©•ä¾¡ãƒ­ã‚¸ãƒƒã‚¯
                        case 'PTR_INC_NODE':
                            variables.dataPointer++;
                            // ãƒ¡ãƒ¢ãƒªã®è‡ªå‹•æ‹¡å¼µ
                            if (variables.dataPointer >= variables.memory.length) {
                                variables.memory.push(0); // å¿…è¦ã«å¿œã˜ã¦æ–°ã—ã„ã‚»ãƒ«ã‚’è¿½åŠ 
                            }
                            break;
                        case 'PTR_DEC_NODE':
                            variables.dataPointer--;
                            if (variables.dataPointer < 0) {
                                throw new Error(`ãƒã‚¤ãƒ³ã‚¿ãŒãƒ¡ãƒ¢ãƒªã®ç¯„å›²ã‚’è¶…ãˆã¾ã—ãŸã€‚`);
                            }
                            break;
                        case 'VAL_INC_NODE':
                            variables.memory[variables.dataPointer]++;
                            // ã‚»ãƒ«ã®å€¤ãŒ255ã‚’è¶…ãˆãŸã‚‰0ã«æˆ»ã™ï¼ˆBrainfuckã®æŒ™å‹•ã«åˆã‚ã›ã‚‹ï¼‰
                            if (variables.memory[variables.dataPointer] > 255) {
                                variables.memory[variables.dataPointer] = 0;
                            }
                            break;
                        case 'VAL_DEC_NODE':
                            variables.memory[variables.dataPointer]--;
                             // ã‚»ãƒ«ã®å€¤ãŒ0ã‚’ä¸‹å›ã£ãŸã‚‰255ã«æˆ»ã™ï¼ˆBrainfuckã®æŒ™å‹•ã«åˆã‚ã›ã‚‹ï¼‰
                            if (variables.memory[variables.dataPointer] < 0) {
                                variables.memory[variables.dataPointer] = 255;
                            }
                            break;
                        case 'OUTPUT_VAL_NODE':
                            currentOutput += String.fromCharCode(variables.memory[variables.dataPointer]);
                            break;
                        case 'INPUT_VAL_NODE':
                            // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤ºã—ã€å…¥åŠ›å¾…ã¡
                            setIsInputModalOpen(true);
                            // Promiseã‚’ä½œæˆã—ã€resolveé–¢æ•°ã‚’refã«ä¿å­˜
                            const promise = new Promise((resolve) => {
                                resolveInputPromise.current = resolve;
                            });
                            // ãƒ—ãƒ­ãƒŸã‚¹ãŒè§£æ±ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
                            await promise;

                            const inputChar = inputModalValue; // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‹ã‚‰ã®å…¥åŠ›å€¤
                            if (inputChar && inputChar.length > 0) {
                                variables.memory[variables.dataPointer] = inputChar.charCodeAt(0);
                            } else {
                                // å…¥åŠ›ãŒãªã‹ã£ãŸå ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼ˆBrainfuckã§ã¯é€šå¸¸0ï¼‰
                                variables.memory[variables.dataPointer] = 0;
                            }
                            setInputModalValue(''); // å…¥åŠ›å€¤ã‚’ã‚¯ãƒªã‚¢
                            setIsInputModalOpen(false); // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
                            break;
                        case 'LOOP_NODE':
                            // ãƒ«ãƒ¼ãƒ—ã¯ç¾åœ¨ã®ãƒã‚¤ãƒ³ã‚¿ãŒæŒ‡ã™å€¤ãŒ0ã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™
                            while (variables.memory[variables.dataPointer] !== 0) {
                                currentOutput += await evaluate(node.body, variables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise); // ãƒ«ãƒ¼ãƒ—æœ¬ä½“ã‚’è©•ä¾¡
                            }
                            break;
                        default:
                            throw new Error(`ä¸æ˜ãªãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã§ã™: ${node.type}`);
                    }
                    // å®Ÿè¡Œé€”ä¸­ã®å‡ºåŠ›ã‚’æ›´æ–°ã—ã¦è¡¨ç¤º
                    setOutput(prevOutput => prevOutput + currentOutput);
                    currentOutput = ''; // æ›´æ–°å¾Œã€ä¸€æ™‚å‡ºåŠ›ã‚’ã‚¯ãƒªã‚¢
                }
                return currentOutput;
            };

            const runCode = async () => { // async functionã«å¤‰æ›´
                setOutput('');
                setError('');
                const globalVariables = {}; // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®å¤‰æ•°ã‚’åˆæœŸåŒ–

                // ã€ŒãŸã™ã‘ã¦ãã ã•ã„ã€ãŒå…¥åŠ›ã•ã‚ŒãŸå ´åˆã®å‡¦ç†
                if (code.trim() === 'ãŸã™ã‘ã¦ãã ã•ã„') {
                    setOutput(HELP_TEXT);
                    return; // ã“ã‚Œä»¥ä¸Šã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã®å‡¦ç†ã¯è¡Œã‚ãªã„
                }

                try {
                    // 1. å­—å¥è§£æ
                    const tokens = lex(code);
                    // console.log('ãƒˆãƒ¼ã‚¯ãƒ³:', tokens); // ãƒ‡ãƒãƒƒã‚°ç”¨

                    // 2. æ§‹æ–‡è§£æ
                    const ast = parse(tokens);
                    // console.log('AST:', JSON.stringify(ast, null, 2)); // ãƒ‡ãƒãƒƒã‚°ç”¨

                    // 3. è©•ä¾¡
                    // evaluateé–¢æ•°ãŒPromiseã‚’è¿”ã™ã®ã§awaitã™ã‚‹
                    const result = await evaluate(ast, globalVariables, setOutput, setIsInputModalOpen, setInputModalValue, resolveInputPromise);
                    // æœ€çµ‚çš„ãªå‡ºåŠ›ã‚’è¨­å®š
                    setOutput(prevOutput => prevOutput + result);
                } catch (e) {
                    setError(`ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã„ãŸã—ã¾ã—ãŸ: ${e.message}`);
                    console.error(e);
                }
            };

            // å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é€ä¿¡ãƒãƒ³ãƒ‰ãƒ©
            const handleInputSubmit = (e) => {
                e.preventDefault();
                if (resolveInputPromise.current) {
                    resolveInputPromise.current(); // Promiseã‚’è§£æ±º
                }
            };

            return (
                <div className="min-h-screen bg-gray-100 p-4 font-sans flex items-center justify-center">
                    <div className="bg-white p-8 rounded-xl shadow-2xl w-full max-w-2xl border-4 border-purple-300">
                        <h1 className="text-3xl font-bold text-center text-purple-700 mb-6 pb-2 border-b-2 border-purple-200">
                            ã€ŒãŠä¸–è©±ã€è¨€èª ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ ğŸµ
                        </h1>

                        <div className="mb-6">
                            <label htmlFor="code-input" className="block text-gray-700 text-lg font-semibold mb-2">
                                ã“ã¡ã‚‰ã¸ã‚³ãƒ¼ãƒ‰ã‚’ã”å…¥åŠ›ãã ã•ã„ã¾ã›:
                            </label>
                            <textarea
                                id="code-input"
                                className="w-full p-4 rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 font-mono text-base bg-gray-50"
                                rows="20"
                                value={code}
                                onChange={(e) => setCode(e.target.value)}
                                placeholder={`ãŠä¸–è©±è¨€èªã®ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«æ›¸ã„ã¦ãã ã•ã„ã€‚\nä¾‹:\nãŠåå‰ã¯ã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã« 100 ã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã« 50 ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã‹ã‚‰ 20 ã‚’å¼•ã„ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã‚’ 3 ã§å‰²ã£ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã‚’ 3 ã§å‰²ã£ãŸã‚ã¾ã‚Šã‚’æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nã€Œãƒã‚¤ãƒ³ãƒˆã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚\n\nãŠåå‰ã¯ã€Œã‚¹ã‚³ã‚¢ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\nã€Œã‚¹ã‚³ã‚¢ã•ã‚“ã€ã« 80 ã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚\nã€Œã‚¹ã‚³ã‚¢ã•ã‚“ã€ãŒ 70 ã‚ˆã‚Šã‚‚å¤§ãã„ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰\n  ã€Œã‚¹ã‚³ã‚¢ã¯è‰¯å¥½ã§ã”ã–ã„ã¾ã™ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\n  ã€Œã‚¹ã‚³ã‚¢ã•ã‚“ã€ãŒ 90 ã¨åŒã˜ã‹ã©ã†ã‹ã€ãŠæ•™ãˆã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n  ã‚‚ã—ã€Œã¯ã„ã€ã§ã”ã–ã„ã¾ã—ãŸã‚‰\n    ã€Œç´ æ™´ã‚‰ã—ã„ã‚¹ã‚³ã‚¢ã§ã”ã–ã„ã¾ã™ï¼ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\n  ãã†ã§ãªã‘ã‚Œã°\n    ã€Œã‚‚ã†å°‘ã—ã§æœ€é«˜ç‚¹ã§ã”ã–ã„ã¾ã™ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\n  ãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\nãã†ã§ãªã‘ã‚Œã°\n  ã€Œã‚¹ã‚³ã‚¢ã¯æ”¹å–„ã®ä½™åœ°ãŒã”ã–ã„ã¾ã™ã€‚ã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\nãŠè©±ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\n\nãŠåå‰ã¯ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚\nã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã« 0 ã‚’æ¸¡ã—ã¦ãã ã•ã„ã€‚\n3 å›ç¹°ã‚Šè¿”ã—ã¦ãã ã•ã„ã€‚\n    ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã« 1 ã‚’è¶³ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n    ã€Œç¾åœ¨ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤ã¯ï¼šã€ã¨ã”å ±å‘Šãã ã•ã„ã€‚\n    ã€Œã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã•ã‚“ã€ã®å€¤ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚\nç¹°ã‚Šè¿”ã—ã¯ä»¥ä¸Šã§ã”ã–ã„ã¾ã™ã€‚\n\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã‚’å³ã«ãšã‚‰ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\nãƒã‚¤ãƒ³ã‚¿ã®å€¤ã‚’èª­ã¿ä¸Šã’ã¦ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚\n`}
                            ></textarea>
                        </div>

                        <button
                            onClick={runCode}
                            className="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75"
                        >
                            å®Ÿè¡Œã—ã¦ã„ãŸã ãã¾ã™ ğŸš€
                        </button>

                        {error && (
                            <div className="mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                                <h3 className="font-bold text-lg mb-2">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã„ãŸã—ã¾ã—ãŸ:</h3>
                                <p className="font-mono">{error}</p>
                            </div>
                        )}

                        <div className="mt-6">
                            <h2 className="text-2xl font-bold text-purple-700 mb-3 pb-1 border-b-2 border-purple-200">
                                ã”å ±å‘Š (å‡ºåŠ›çµæœ):
                            </h2>
                            <pre className="output-area bg-gray-50 p-4 rounded-lg border-2 border-gray-300 text-gray-800 text-base overflow-auto max-h-96">
                                {output}
                            </pre>
                        </div>
                    </div>

                    {/* Custom Input Modal */}
                    {isInputModalOpen && (
                        <div className="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50">
                            <div className="bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm border-4 border-purple-300">
                                <h3 className="text-xl font-bold text-purple-700 mb-4">ä¸»æ§˜ã€ä½•ã‹æ–‡å­—ã‚’ãŠä¸ãˆãã ã•ã„ã€‚</h3>
                                <form onSubmit={handleInputSubmit}>
                                    <input
                                        type="text"
                                        className="w-full p-3 rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 font-mono text-lg text-center"
                                        maxLength="1" // 1æ–‡å­—ã®ã¿å…¥åŠ›å¯èƒ½
                                        value={inputModalValue}
                                        onChange={(e) => setInputModalValue(e.target.value)}
                                        autoFocus
                                    />
                                    <button
                                        type="submit"
                                        className="mt-4 w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105"
                                    >
                                        ãŠæ¸¡ã—ã—ã¾ã™
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’HTMLã® 'root' è¦ç´ ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
